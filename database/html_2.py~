import psycopg2
import os

def main(fname):
    conn = psycopg2.connect('dbname=invoice')
    curr = conn.cursor()
    curr.execute('SELECT * FROM customer')
    rows = curr.fetchall()
    headers = [i[0] for i in curr.description]
    
    l = []
    # for i in headers:
    #     s = '<tr><th>'+i+' </th></tr>'
    #     l.append(s)
    # for j in l:
    #     strrr = '<table><thead>'+j+'</thead></table>'
    for i in headers:
        s = '<th scope="col" >'+i+'</th>'
        l.append(s)
        
    r = []
    m = []
    for i in rows:
        
        for j in range(len(rows)):
            
            s = '<td>'+str(i[j])+'</td>'
            r.append(s)
            print(r)
    #     m.append(r)
    # print(m)

    for i,j in zip(rows,range(len(rows))):
        s = '<td>'+str(i[j])+'</td>'
        r.append(s)
    
        print(r)
        
    strr = '''<table class=\"table\">
      <thead><tr>'''+'\n'.join(l)+'''</tr></thead>
      <tbody>
  {% for data in datas %}
    <tr>
      
      <td>{{ data[0] }}</td>
   
      <td>{{ data[1] }}</td>
   
      <td>{{ data[2] }}</td>
    
      <td>{{ data[3] }}</td>
   
      <td>{{ data[4] }}</td>
    </tr>
    {% endfor %}
      </tbody>
    </table>'''
       
    with open(fname,'wt') as f:
        f.write(strr)

    print("DONE !!!!!!")

if __name__ == "__main__":
    main("data.html")
